#-------------------------------------------------------------------------------
# Defines an artifact for the project Lp3Project.
#     Doing this by hand makes it easier to specify platform specific
#     dependencies since Macaroni isn't good at that yet.
#
# *NOTE* This file was *NOT* generated by Macaroni, but is meant to appear
#        as if it was to be compatable with other plugins!
#-------------------------------------------------------------------------------

cmake_minimum_required (VERSION 2.6)
project (Lp3Project)

#-------------------------------------------------------------------------------
# Define the library "Lp3Test".
#     This is used by Lp3 projects to pull in references to Boost test
#     on the PC and other goodies elsewhere.
#-------------------------------------------------------------------------------

#set(Boost_USE_STATIC_LIBS ON)
#set(Boost_USE_MULTITHREADED ON)

find_package(Boost COMPONENTS unit_test_framework REQUIRED)

add_library(Lp3Test ../src/Lp3CMakeAppeasement.cpp )
include_directories(${Boost_INCLUDE_DIRS})
target_link_libraries(Lp3Test ${Boost_SYSTEM_LIBRARY})
target_link_libraries(Lp3Test ${Boost_UNIT_TEST_FRAMEWORK_LIBRARY})
LINK_DIRECTORIES(${Boost_LIBRARY_DIR})

set_source_files_properties(../src  PROPERTIES HEADER_FILE_ONLY TRUE )
#target_link_libraries(Lp3Test Lp3___Lp3Project___DEV-Lp3Test)

#-------------------------------------------------------------------------------
# Define the library "Lp3GfxDeps".
#     This is used by Lp3 projects to pull in references to OpenGL on Windows
#     and other stuff elsewhere.
#-------------------------------------------------------------------------------

find_package(OpenGL REQUIRED)

add_library(Lp3GfxDeps  ../src/Lp3CMakeAppeasementGfx.cpp )

if (UNIX)
    find_package(GLUT REQUIRED)
    include_directories( ${OPENGL_INCLUDE_DIRS}  ${GLUT_INCLUDE_DIRS} )
    target_link_libraries(Lp3GfxDeps ${OPENGL_LIBRARIES} ${GLUT_LIBRARY} )
else()
    include_directories( ${OPENGL_INCLUDE_DIRS} )
    target_link_libraries(Lp3GfxDeps ${OPENGL_LIBRARIES} )

    target_link_libraries("Xinput.lib")
endif()



#-------------------------------------------------------------------------------
# Actually export the information here so other libraries will use it.
#-------------------------------------------------------------------------------

export(TARGETS
       Lp3Test  Lp3GfxDeps
       NAMESPACE Lp3___Lp3Project___DEV- FILE cmake-interface.cmake)


#-------------------------------------------------------------------------------
# Define a test to see if the Boost stuff is working.
#-------------------------------------------------------------------------------

add_executable(Lp3BoostTestTest ../src/Lp3BoostTestTest.cpp )
target_link_libraries(Lp3BoostTestTest Lp3Test)
enable_testing()
add_test(TheTest Lp3BoostTestTest)
